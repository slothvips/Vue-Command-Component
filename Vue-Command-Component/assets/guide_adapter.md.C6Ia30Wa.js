import{_ as i,c as a,o as n,aH as h}from"./chunks/framework.CvJfJ0fb.js";const g=JSON.parse('{"title":"é€‚é…å…¶ä»–ç»„ä»¶","description":"","frontmatter":{},"headers":[],"relativePath":"guide/adapter.md","filePath":"guide/adapter.md"}'),k={name:"guide/adapter.md"};function l(p,s,t,e,E,r){return n(),a("div",null,s[0]||(s[0]=[h(`<h1 id="é€‚é…å…¶ä»–ç»„ä»¶" tabindex="-1">é€‚é…å…¶ä»–ç»„ä»¶ <a class="header-anchor" href="#é€‚é…å…¶ä»–ç»„ä»¶" aria-label="Permalink to &quot;é€‚é…å…¶ä»–ç»„ä»¶&quot;">â€‹</a></h1><p>å°½ç®¡å·²ç»æä¾›ä¸€äº›å¼€ç®±å³ç”¨çš„ç»„ä»¶ï¼Œç„¶è€Œä¸ªäººçš„ç²¾åŠ›æ˜¯æœ‰é™,ä½ æ­£åœ¨ä½¿ç”¨çš„ç»„ä»¶å¯èƒ½å¹¶æ²¡æœ‰åœ¨è¿™ä¸ªé¡¹ç›®ä¸­è¿›è¡Œé€‚é…,æ‰€ä»¥è¿™å°±éœ€è¦è‡ªå·±åŠ¨æ‰‹äº†,å¦‚æœä½ æœ‰å…´è¶£,é€‚é…ä¹‹åæ¬¢è¿è¿›è¡Œpr.</p><p>æ¥ä¸‹æ¥çš„å†…å®¹,æˆ‘å°†å‘Šè¯‰ä½ æ€ä¹ˆå°†è‡ªå·±æ­£åœ¨ä½¿ç”¨çš„ç»„ä»¶é€‚é…ä¸ºå‘½åå¼ç»„ä»¶ã€‚é¦–å…ˆæˆ‘ä»¬è¦æ˜ç™½æˆ‘ä»¬é€‚é…çš„æœ¬è´¨å·¥ä½œå†…å®¹,å…¶æœ€ç»ˆç›®çš„ä¸ºäº†å’Œæˆ‘ä»¬<code>core</code>å±‚çš„ä¸€äº›é€»è¾‘è¿›è¡Œäº’åŠ¨å’Œå…³è”,æ¯”å¦‚å‘ŠçŸ¥<code>core</code>å±‚åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œé”€æ¯æ¸…ç†é€»è¾‘,ä»¥åŠä¸€äº›å…¶ä»–åŠŸèƒ½çš„äº’åŠ¨,æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ç”¨è¿™ä¸ªé€‚é…å±‚æ¥æŠ¹å¹³ç»„ä»¶ä¹‹é—´çš„å·®å¼‚.æœ‰äº†è¿™ä¸ªå‰ææˆ‘ä»¬æ‰èƒ½æ›´å¥½çš„ç†è§£æˆ‘ä»¬åœ¨å¹²ä»€ä¹ˆ.</p><h2 id="é€‚é…å™¨-createadapter" tabindex="-1">é€‚é…å™¨ <code>createAdapter</code> <a class="header-anchor" href="#é€‚é…å™¨-createadapter" aria-label="Permalink to &quot;é€‚é…å™¨ \`createAdapter\`&quot;">â€‹</a></h2><p>ç»¼ä¸Šæ‰€è¿°,æˆ‘ä»¬å…¶å®å¯ä»¥å±è”½ä¸€äº›é€šç”¨çš„é€»è¾‘å¤„ç†,è®©é€‚é…å·¥ä½œå˜å¾—æ›´ç®€å•,æœ€ç»ˆè®©æˆ‘ä»¬åªç”¨é€‚é…ç»„ä»¶ä¹‹é—´å·®å¼‚çš„åœ°æ–¹å³å¯.è€Œ<code>createAdapter</code>å‡½æ•°å°±æ˜¯ç”¨æ¥å®ç°è¿™ä¸ªç›®çš„çš„.</p><h3 id="åŸºç¡€ç”¨æ³•" tabindex="-1">åŸºç¡€ç”¨æ³• <a class="header-anchor" href="#åŸºç¡€ç”¨æ³•" aria-label="Permalink to &quot;åŸºç¡€ç”¨æ³•&quot;">â€‹</a></h3><p>æˆ‘å°†å‘ä½ ä»‹ç»<code>createAdapter</code>è¿™ä¸ªå‡½æ•°,é€šè¿‡ä»–æˆ‘ä»¬å°±å¯ä»¥å¿«é€Ÿé€‚é…è‡ªå·±çš„å‘½ä»¤å¼ç»„ä»¶.</p><p>å®é™…ä¸Šä»–æ˜¯å¯¹<code>CommandProviderWithRender</code>å‡½æ•°çš„å°è£…,å°½é‡å±è”½é€šç”¨çš„é€»è¾‘,è®©ä½ ä¸“æ³¨äºé€‚é…è‡ªå·±çš„ç»„ä»¶.</p><p>å®ƒéœ€è¦ä¸¤ä¸ªå‚æ•°:</p><ul><li>ä¸€ä¸ªæ˜¯æ¸²æŸ“å™¨,ç”¨æ¥å†³å®šå¦‚ä½•æ¸²æŸ“ç»„ä»¶,ä»¥åŠå¦‚ä½•å’Œ<code>core</code>å±‚çš„é€»è¾‘è¿›è¡Œå…³è”(ä¸»è¦æ˜¯é”€æ¯é€»è¾‘).</li><li>ä¸€ä¸ªæ˜¯åˆå§‹é…ç½®,è¿™ä¸ªå¾ˆå¥½ç†è§£,ä½ å¯ä»¥å°†å…¶è®¤ä¸ºæ˜¯ç»„ä»¶å±æ€§çš„é»˜è®¤å€¼,ä½ åç»­æœ‰å¾ˆå¤šåœ°æ–¹å¯ä»¥å¯¹å…¶è¿›è¡Œæ”¹å†™å’Œè¦†ç›–.</li></ul><p>å…¶ä¸­æˆ‘ä»¬æ‰€æœ‰çš„é€‚é…å·¥ä½œéƒ½åœ¨ <code>render</code> ä¸­å®ç°å³å¯,æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬å…·ä½“éœ€è¦åšå“ªäº›äº‹æƒ…:</p><ol><li>é¦–å…ˆæ˜¯ä¸€å®šè¦è¿”å›ä¸€ä¸ªç›®æ ‡ç»„ä»¶çš„æ¸²æŸ“ vnode çš„,ä¸ç®¡ä½ æ˜¯é€šè¿‡ jsx,è¿˜æ˜¯ h å‡½æ•°.</li><li>å°†å‚æ•° visible ç»‘å®šåˆ°ç»„ä»¶ä¸Š,ç”¨æ¥æ§åˆ¶æ˜¾éš,ä¸€èˆ¬å»ºè®®å•å‘ç»‘å®š,ç”±æˆ‘ä»¬è‡ªå·±æ¥å®Œå…¨æ§åˆ¶.</li><li>ä¼ é€’æ’æ§½,å±æ€§,äº‹ä»¶ç­‰,é™¤äº†è‡ªå·±å®šä¹‰çš„ä¸€äº›ä¾¿æ·å±æ€§ä¹‹å¤–,ä¸€èˆ¬æˆ‘ä»¬ä¼šç›´æ¥å±•å¼€<code>{...config.attrs}</code>åˆ°ç»„ä»¶ä¸Š.</li><li>å°†å‚æ•°<code>componentRef</code>ç»‘å®šåˆ°ç»„ä»¶ä¸Š,ç„¶ååˆ©ç”¨<code>onVnodeMounted</code>çš„å›è°ƒæ‰§è¡Œ<code>onMounted</code>,å®ƒå½“å‰çš„ç›®çš„æ˜¯ä¸ºäº†è®¾ç½®ç»„ä»¶çš„å®ä¾‹å¼•ç”¨,æ–¹ä¾¿è°ƒç”¨ç»„ä»¶ä¸Šæš´éœ²çš„å±æ€§å’Œæ–¹æ³•.</li><li>å’Œ <code>core</code> å±‚å…³è”é”€æ¯æ¸…ç†é€»è¾‘,æ¯”å¦‚åœ¨ç»„ä»¶å…³é—­çš„å›è°ƒå‡½æ•°é‡Œ<code>consumer.value!.destroy()</code>.å¦‚æœç»„ä»¶æœ‰å…³é—­åŠ¨ç”»ç»“æŸæ—¶çš„å›è°ƒ,é‚£ä¹ˆå»ºè®®ä½¿ç”¨è¿™ä¸ªå›è°ƒæ¥é”€æ¯ä»¥ä¿è¯åŠ¨ç”»çš„å®Œæ•´æ’­æ”¾.(ä½†ä¸æ˜¯å¿…é¡»çš„,å†…éƒ¨å·²ç»å»¶è¿Ÿä¸‰ç§’å¸è½½,ä¿è¯åŠ¨ç”»çš„å®Œæ•´æ’­æ”¾).</li></ol><p>å¬ä¸Šå»ä¼¼ä¹éœ€è¦åšå¾ˆå¤šå·¥ä½œ,ä½†å®é™…ä¸Šæˆ‘ä»¬å¯ä»¥å¾ˆç®€å•çš„å®Œæˆé€‚é…,ä¸è¦è¢«æˆ‘å•°å—¦çš„è¯è—»æ‰€åŠé€€.ä¸‹è¾¹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­,å®ƒå°†ä¸€ä¸ª<code>MyComponent</code>ç»„ä»¶é€‚é…ä¸ºå‘½ä»¤å¼ç»„ä»¶:</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createAdapter } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@vue-cmd/core&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myComponentRender</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">contentVNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">componentRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">visible</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">onMounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">consumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å¯¹åº”1. è¿”å›ç›®æ ‡ç»„ä»¶çš„æ¸²æŸ“ vnode</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MyComponent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* å¯¹åº”2. å•å‘ç»‘å®š */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    modelValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{visible.value}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* å¯¹åº”4. è®¾ç½® ref å¼•ç”¨ */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{componentRef} </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onVnodeMounted</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{onMounted}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* å¯¹åº”3. ä¼ é€’å±æ€§ */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.attrs}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* å¯¹åº”5. å…³è”é”€æ¯æ¸…ç†é€»è¾‘ */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onClosed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> consumer.value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()}&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* å‘½ä»¤ç»„ä»¶å†…éƒ¨æ¸²æŸ“å†…å®¹ */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> contentVNode,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* å¯¹åº”3. ä¼ é€’æ’æ§½ */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.slots,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MyComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> useMyComponent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createAdapter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  render: myComponentRender,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // è¿™é‡Œå¯ä»¥æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  defaultConfig: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åŸºç¡€é€‚é…å™¨&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    width: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;400px&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è¿™é‡Œå¯ä»¥è®¾ç½®ä¸€äº›ç»„ä»¶çš„å…ƒæ•°æ®,æ–¹ä¾¿ä½ åç»­ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    meta: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-component&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>å®é™…ä½“éªŒä¹‹å,ä½ ä¼šå‘ç°é€‚é…å·¥ä½œæå…¶ç®€å•é«˜æ•ˆ.ğŸ˜Š</p><div class="tip custom-block"><p class="custom-block-title">å…³äºé”€æ¯å‡½æ•°çš„é€‰æ‹©</p><p>æˆ‘ä»¬ä¸€èˆ¬ä¼šå°†ç”¨æˆ·çš„è¡Œä¸ºåŒºåˆ†ä¸ºä¸‰ç±»ï¼šCommit(æäº¤ç¡®è®¤)/Cancel(å–æ¶ˆ)/Dismiss(å…³é—­å¿½ç•¥),æ­£å¥½å¯¹åº”promiseçš„ä¸‰ç§çŠ¶æ€:fulfilled/rejected/pending.</p><p>åˆæ­£å¥½,æˆ‘ä»¬çš„é”€æ¯é€»è¾‘å¯¹åº”æ¨è¿›promiseçŠ¶æ€çš„å‡½æ•°åˆ†åˆ«ä¸º:</p><ul><li>Commit:æ¨è¿›åˆ°fulfilledçŠ¶æ€ &gt; <code>consumer.destroyWithResolve()</code></li><li>Cancel:æ¨è¿›åˆ°rejectedçŠ¶æ€ &gt; <code>consumer.destroyWithReject()</code></li><li>Dismiss:ä¸æ¨è¿›promiseçŠ¶æ€ &gt; <code>consumer.destroy()</code></li></ul><p>é™¤éç”¨æˆ·åœ¨å‘½ä»¤ç»„å»ºå†…éƒ¨è§†å›¾æ˜ç¡®è¡¨æ€(æ¯”å¦‚ç‚¹å‡»ç¡®è®¤/æ‹’ç»æŒ‰é’®),å¦åˆ™æˆ‘ä»¬ä¸€èˆ¬ä¼šè®¤ä¸ºç”¨æˆ·æ˜¯Dismissçš„,æ¯”å¦‚ç‚¹å‡»å…³é—­å›¾æ ‡,é®ç½©å±‚å¯¼è‡´çš„ç»„ä»¶é”€æ¯ç­‰.</p><p>æ‰€ä»¥å°±å•é€‚é…å±‚æ¥è®²,æˆ‘ä»¬ä¸€èˆ¬ä¼šè®¤ä¸ºç”¨æˆ·çš„è¡Œä¸ºæ˜¯Dismissçš„,é™¤éä¸šåŠ¡å…·æœ‰ç‰¹æ®Šæ€§,æ¯”å¦‚ç”¨æˆ·ç‚¹å‡»å…³é—­å›¾æ ‡,ä½†æ˜¯éœ€è¦æ‰§è¡Œä¸€äº›ç‰¹æ®Šé€»è¾‘,å¦åˆ™æˆ‘ä»¬éƒ½é€‰æ‹©ä¸æ¨è¿›promiseçš„çŠ¶æ€,å³å§‹ç»ˆé€‰æ‹©<code>consumer.destroy()</code>æ¥é”€æ¯ç»„ä»¶.</p></div><h3 id="é…ç½®è½¬æ¢å™¨-configtransformer" tabindex="-1">é…ç½®è½¬æ¢å™¨ <code>configTransformer</code> <a class="header-anchor" href="#é…ç½®è½¬æ¢å™¨-configtransformer" aria-label="Permalink to &quot;é…ç½®è½¬æ¢å™¨ \`configTransformer\`&quot;">â€‹</a></h3><p>åœ¨æœ€ç»ˆæ¸²æŸ“å‰å¯¹é…ç½®è¿›è¡Œé¢„å¤„ç†,ä½ å¯ä»¥å¯¹é…ç½®è¿›è¡Œä»»æ„çš„ä¿®æ”¹,æ–¹ä¾¿ä½ è¿›è¡Œä¸€äº›æ§åˆ¶.å®ƒçš„ä½œç”¨æ˜¯ä¸ºäº†è®©ä½ æœ‰åœ°æ–¹å¯ä»¥ç»Ÿä¸€çš„æ‹¦æˆªå’Œæ§åˆ¶é…ç½®.</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createAdapter } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@vue-cmd/core&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> myComponentRender</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">contentVNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">componentRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">visible</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">onMounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">consumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MyComponent</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{componentRef} </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onVnodeMounted</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{onMounted} {</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.attrs}&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {contentVNode}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MyComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> useMyComponentWithTransformer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createAdapter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  renderer: myComponentRender,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  configTransformer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">useConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      customClassName: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">customClassName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;} enhanced-component\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">trim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      attrs: {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.attrs,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        theme: config.theme </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;light&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="commandproviderwithrender" tabindex="-1"><code>CommandProviderWithRender</code> <a class="header-anchor" href="#commandproviderwithrender" aria-label="Permalink to &quot;\`CommandProviderWithRender\`&quot;">â€‹</a></h2><p>å¦‚æœä½ éœ€è¦è¿›è¡Œå®Œå…¨è‡ªä¸»çš„å®šåˆ¶ä½ çš„å‘½ä»¤å¼ç»„ä»¶,<code>createAdapter</code> å¯èƒ½æ— æ³•æ»¡è¶³ä½ çš„çµæ´»æ€§éœ€æ±‚,é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ <code>CommandProviderWithRender</code> å‡½æ•°æ¥è¿›è¡Œé€‚é…,ä»–å¯ä»¥è®©ä½ å®Œå…¨æ§åˆ¶ä½ çš„å‘½ä»¤å¼ç»„ä»¶çš„æ¸²æŸ“è¿‡ç¨‹ä»¥åŠé€»è¾‘å¤„ç†.</p><p>ä¸‹è¾¹æ˜¯ä¸€ä¸ªå°† element-plus çš„ dialog ç”¨<code>CommandProviderWithRender</code>é€‚é…çš„ä¾‹å­:</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ElDialog, useGlobalComponentSettings, ElButton, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DialogProps } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;element-plus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { VNode } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { getCurrentInstance, h, ref, defineComponent } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ICommandComponentArrtsProviderConfig, IUseCommandComponentConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./Core&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { CommandProvider } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./Core&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { busName2EventName, eventName2BusName, isNull } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { EVENT_NAME } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IElementPlusDialogConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ç›®æ ‡uiåº“ç›®æ ‡ç»„ä»¶çš„æ’æ§½</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  slots</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> VNode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> VNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ç›®æ ‡uiåº“ç›®æ ‡ç»„ä»¶çš„å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  attrs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Partial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DialogProps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å…¶å®titleå’Œwidthéƒ½æ˜¯ç›®æ ‡ç»„ä»¶çš„å±æ€§,æ‰€ä»¥é€šè¿‡attrså±æ€§ä¹Ÿèƒ½å®ç°,ä½†æ˜¯è¿™ä¸¤ä¸ªå±æ€§å®åœ¨å¤ªå¸¸è§äº†,å¯ä»¥å•ç‹¬æ‹å‡ºæ¥,å°‘äº›ä¸€äº›ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  title</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  width</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ICommandComponentArrtsProviderConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  Record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ElementPlusDialogå…¨å±€æŒ‚è½½ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mountNode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HTMLElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setElementPlusDialogMountNode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">node</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HTMLElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mountNode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> node;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createElementPlusDialog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">useConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IUseCommandComponentConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æˆ‘ä»¬éœ€è¦æ•è·ä½¿ç”¨å‘½ä»¤å¼ç»„ä»¶çš„çš„ç»„ä»¶å®ä¾‹,æˆ‘ä»¬ä¼šç”¨å®ƒæ¥è·å–ä¸Šä¸‹æ–‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> parentInstance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getCurrentInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // è¿”å›ä¸€ä¸ªå‡½æ•°,è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªç»„ä»¶èŠ‚ç‚¹,ä»¥åŠé…ç½®é¡¹,è¿”å›ä¸€ä¸ªconsumerå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> commandDialog</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ContentVNode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> VNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IElementPlusDialogConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // åˆå§‹æ˜¾éšçŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> visible</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isNull</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(useConfig.immediately) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">useConfig.immediately);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è¿™é‡Œçš„consumerå’Œå¼¹çª—å†…éƒ¨é€šè¿‡\`getConsumer\`æ¥æ”¶åˆ°çš„\`consumer\`æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> consumer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CommandProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      parentInstance,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      h</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        defineComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // è¿™é‡Œä¸€èˆ¬å»ºè®®ä½ åœ¨åç»­èµ‹å€¼ä¸ºUIåº“çš„å¼¹çª—ç»„ä»¶çš„ref,ä»¥ä¾¿å°†æ¥ä½¿ç”¨å®ƒæš´éœ²çš„å±æ€§å’Œæ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> componentRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleMounted</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">              Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // è®¾ç½®ref,ä»¥ä¾¿å°†æ¥ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶æš´éœ²çš„å±æ€§å’Œæ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                consumer.componentRef </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> componentRef;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleClose</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">done</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">              done</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // åŒ…è£…å¤–éƒ¨ç›‘å¬çš„onClosedäº‹ä»¶,å¹¶è§¦å‘é”€æ¯äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleClosed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">EVENT_NAME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.destory);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">              return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.attrs?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onClosed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?.(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ElDialog</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{componentRef}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                modelValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{visible.value}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                beforeClose</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{handleClose}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                onVnodeMounted</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{handleMounted}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                {</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                  title: config.title,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                  width: config.width,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                  ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.attrs,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                onClosed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{handleClosed}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              &gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                {{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                  default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ContentVNode,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                  ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.slots,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ElDialog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        provideProps: config.provideProps </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        appendTo: mountNode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.appendTo,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        visible,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ä¼˜å…ˆä½¿ç”¨æ‰§è¡ŒåŠ¨ä½œçš„meta,å…¶æ¬¡ä½¿ç”¨åˆ›å»ºæ—¶çš„meta</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        meta: {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(useConfig?.meta </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;command-element-plus-dialog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(config?.meta </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    );</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> consumer;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> commandDialog;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p>é€‚é…èµ·æ¥ç¹çå¾ˆå¤š,ä½†æ˜¯å®ƒå…·æœ‰æœ€å¤§çš„çµæ´»æ€§.</p><h2 id="æœ€å" tabindex="-1">æœ€å <a class="header-anchor" href="#æœ€å" aria-label="Permalink to &quot;æœ€å&quot;">â€‹</a></h2><p>éå¿…è¦,ä¸è¦ä½¿ç”¨<code>CommandProviderWithRender</code>,å› ä¸ºä½ éœ€è¦é¢å¤–å¤„ç†å¾ˆå¤šå·¥ä½œå†…å®¹.</p><p>å¤§å¤šæ•°æ—¶å€™éƒ½åªéœ€è¦ä½¿ç”¨<code>createAdapter</code>å³å¯,å®ƒå¯ä»¥å¸®ä½ å®Œæˆç»å¤§å¤šæ•°å·¥ä½œ,è®©ä½ ä¸“æ³¨äºå¦‚ä½•æ¸²æŸ“è‡ªå·±çš„ç»„ä»¶ä»¥åŠå¦‚ä½•å’Œå‘½ä»¤å¼ç»„ä»¶è¿›è¡Œäº¤äº’,è€Œæ— éœ€å…³å¿ƒé€šç”¨çš„é€»è¾‘.</p>`,27)]))}const y=i(k,[["render",l]]);export{g as __pageData,y as default};
