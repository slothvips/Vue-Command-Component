<script lang="tsx" setup>
// å®é™…åº”è¯¥ä¹¦å†™ä¸º:import { createElementPlusDialog } from "vue3-command-dialog";
import { createElementPlusDialog, createVantUiPopup, createVantUiTitlePopupOnBottom } from "../../../components";
import Content from "./components/Content.vue";
import { provide } from "vue";

provide("base", "æ¥è‡ªbaseçš„ğŸ©·");

const CommandDialog = createElementPlusDialog();

const openDialog = () => {
  CommandDialog(<Content />, {
    title: "åŸºç¡€ç”¨æ³•",
  });
};

const openDialog2 = () => {
  const { hide, show, destroyWithResolve } = CommandDialog(<Content />, {
    title: "å¤–éƒ¨æ§åˆ¶",
  });
  [2, 4, 6].forEach((t) => {
    setTimeout(() => {
      t === 2 && hide();
      t === 4 && show();
      t === 6 && destroyWithResolve();
    }, t * 1000);
  });
};

const CommandDialog2 = createElementPlusDialog(false);
const openDialog3 = () => {
  const { show } = CommandDialog2(<Content />, {
    title: "ä¸‰ç§’åæ‰“å¼€",
  });
  setTimeout(() => {
    show();
  }, 3000);
};

const CommandVantUiPopup = createVantUiPopup();
const openVantUiPopup = () => {
  CommandVantUiPopup(<div style="color: red; height: 30vh;padding: 20px;">æˆ‘æ˜¯vantUiçš„å¼¹çª—é‡Œçš„å†…å®¹</div>);
};

const CommandVantUiTitlePopupOnBottom = createVantUiTitlePopupOnBottom();
const openVantUiTitlePopupOnBottom = () => {
  CommandVantUiTitlePopupOnBottom(<div style="color: red; height: 30vh; width: 90vw;">æˆ‘æ˜¯vantUiçš„å¼¹çª—é‡Œçš„å†…å®¹</div>, {
    title: "VantUiå¼¹çª—",
    attrs: {
      overlay: false,
      position: "center",
      style: {
        backgroundColor: "#fff",
        color: "#000",
        width: "fit-content",
      },
    },
  });
};
</script>

<template>
  <div>
    <el-button type="primary" @click="openDialog">æ‰“å¼€å¼¹çª—</el-button>
    <el-button type="success" @click="openDialog2">å¼¹çª—å¤–éƒ¨æ§åˆ¶æ˜¾ç¤º/éšè—/é”€æ¯(è¿‡ç¨‹ä¸­å¼¹çª—ä¼šè‡ªåŠ¨æ˜¾ç¤ºå…³é—­)</el-button>

    <el-button type="success" @click="openDialog3">ä¸‰ç§’åæ‰“å¼€</el-button>
    <el-divider>VantUiã®demo</el-divider>
    <el-button type="success" @click="openVantUiPopup">æ‰“å¼€VantUiå¼¹çª—</el-button>
    <el-button type="success" @click="openVantUiTitlePopupOnBottom">æ‰“å¼€VantUiå¼¹çª—(æ ‡é¢˜+åº•éƒ¨å¼¹å‡º)</el-button>
  </div>
</template>

<style lang="scss" scoped></style>
